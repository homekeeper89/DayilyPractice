<!DOCTYPE html>
<head>
    <script src = "../lib/fx.js"> </script>
    <title>SelfHello</title>
</head>
<body>
    <h2>Hello</h2>
</body>
<script>
    //0902 callback Promise
    function add10(a, callback){
        setTimeout(()=>callback(a+10), 100)
    }
    add10(5, res=>{
        add10(res, res=>{
            add10(res, res=>{
                log(res)
            })
        })
    })
    // 기능은 같지만 모양이 다르다
    function add20(a){
        return new Promise(resolve => setTimeout(()=> resolve(a+20), 100));

    }
    add20(5)
        .then(add20)
        .then(add20)
        .then(log)
    //0902 비동기를 값으로 만드는 Promise
    // promise가 callback과 차이점을 갖는 가장 큰 이유는 일급으로 비동기 상황을 다룬다.
    // promise라는 클래스를 통해 만들어진 인스턴스를 반환하며 
    // 대기, 성공, 실패를 다루는 일급 값으로 이루어져있다.
    // return new Promise(resolve => setTimeout(()=> resolve(a+20), 100)); 이 부분
    var a = add10(5, res=>{
        add10(res, res=>{
            add10(res, res=>{
                log(res)
            })
        })
    })
    var b = add20(5)
        .then(add20)
        .then(add20)
        .then(log)
    log(a, b) // 하나는 undefined, 하나는 프로미스
    // a는 실행 이후 할수있는게 없는데, b는 그렇지않다.
    b.then(a => a-5);
    // 일급이라는 것은 함수에 전달될수도, 값이 될수도..
</script>